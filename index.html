<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quanto mi ami davvero?</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Variabili CSS */
    :root {
      /* Colori Fase 1 (basati sull'immagine del coniglio e corvo) */
      --intro-bg-color: #fef1f5; /* Rosa chiaro, come nel tuo esempio */
      --intro-text-color: #333;
      --intro-clickable-bg: #ffb6c1; /* Rosa un po' pi√π scuro per il bottone */
      --intro-clickable-hover: #ffc8d3;

      /* Colori Fase 2 (basati sull'immagine del corvo singolo) */
      --quiz-bg-color: #E8E6FC; /* Lavanda molto chiaro, come lo sfondo dominante dell'immagine del corvo */
      --quiz-text-color: #333; /* Testo scuro per contrasto con lo sfondo chiaro */
      --quiz-font: 'Inter', sans-serif; /* Un font pi√π serio per la fase 2 */
      --quiz-primary-color: #6a05ad; /* Viola scuro/intenso, come i dettagli del corvo */
      --quiz-button-hover-color: #8b008b; /* Viola pi√π chiaro per l'hover */
      --quiz-border-color: #c0b8e8; /* Un bordo leggermente viola chiaro */
      --quiz-container-bg: #f5f3ff; /* Un lilla molto chiaro per il container */
      --quiz-shadow-color: rgba(0, 0, 0, 0.15); /* Ombra leggera */

      --transition-speed: 0.8s; /* Velocit√† di transizione tra le fasi */
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif; /* Ho usato questo font, ma puoi cambiarlo */
      background-color: var(--intro-bg-color); /* Rosa chiaro */
      color: var(--intro-text-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      transition: all 0.8s ease;
      text-align: center;
    }

    #container {
      max-width: 90%; /* Come nel tuo esempio */
    }

    .hidden {
      display: none;
    }

    .clickable {
      margin-top: 20px;
      padding: 15px 25px;
      font-size: 1.1rem;
      background-color: var(--intro-clickable-bg); /* Rosa per il bottone */
      color: var(--intro-text-color);
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }

    .clickable:hover {
      background-color: var(--intro-clickable-hover); /* Rosa pi√π chiaro all'hover */
    }

    /* Stili Fase 2 (Pre-Quiz, Quiz e Finale - tutto basato sull'immagine del corvo) */
    body.phase-2 {
        background-color: var(--quiz-bg-color); /* Lavanda chiaro */
        color: var(--quiz-text-color);
        font-family: var(--quiz-font);
    }
    .container.phase-2 {
        background-color: var(--quiz-container-bg); /* Lilla chiaro per il container */
        box-shadow: 0 8px 20px var(--quiz-shadow-color);
    }

    .phase-2 h1, .phase-2 h2 {
        color: var(--quiz-primary-color);
        margin-bottom: 25px;
        font-weight: 700;
    }

    .question-section {
        margin-bottom: 30px;
        text-align: left;
    }

    .question-section p {
        font-size: 1.15em;
        margin-bottom: 15px;
        color: var(--quiz-text-color);
    }

    /* Stile per le opzioni del quiz (label dei radio button) */
    .options label {
        display: block;
        background-color: var(--quiz-container-bg); /* Un lilla chiaro come base */
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 8px; /* Bordi arrotondati */
        cursor: pointer;
        transition: background-color 0.3s ease, border-color 0.3s ease;
        border: 1px solid var(--quiz-border-color); /* Bordo leggermente viola */
        font-size: 1em;
        color: var(--quiz-text-color);
    }

    .options label:hover {
        background-color: #dcd7f5; /* Un lilla leggermente pi√π scuro per l'hover */
        border-color: var(--quiz-primary-color); /* Il riflesso viola sul bordo */
    }

    .options input[type="radio"] {
        display: none; /* Nasconde i radio button nativi */
    }

    /* Stile quando l'opzione √® selezionata */
    .options input[type="radio"]:checked + label {
        background-color: var(--quiz-primary-color); /* Sfondo viola quando selezionato */
        border-color: var(--quiz-primary-color);
        color: white; /* Testo bianco */
    }

    /* Stile per tutti i bottoni nella Fase 2 (Inizia Quiz, Scopri la tua verit√†) */
    .phase-2 button {
        background-color: var(--quiz-primary-color);
        color: white;
        border: none;
        padding: 15px 25px;
        border-radius: 8px; /* Bordi arrotondati */
        font-size: 1.1em;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        margin-top: 20px;
    }

    .phase-2 button:hover {
        background-color: var(--quiz-button-hover-color); /* Viola pi√π chiaro all'hover */
        transform: translateY(-2px);
    }

    .phase-2 button:disabled {
        background-color: #999; /* Grigio pi√π chiaro per bottone disabilitato */
        cursor: not-allowed;
        transform: translateY(0); /* Rimuovi l'effetto sollevamento per i disabilitati */
    }

    #final-phrase {
        font-size: 1.4em;
        font-style: italic;
        margin-bottom: 30px;
        color: var(--quiz-primary-color);
        word-wrap: break-word;
    }

    #final-image {
        width: 150px; /* Aumento la dimensione per renderla pi√π cliccabile per la condivisione */
        height: 150px;
        margin-top: 20px;
        cursor: pointer;
        transition: transform 0.3s ease-out;
        /* Aggiungo un piccolo bordo o ombra per indicare che √® cliccabile */
        border-radius: 50%; /* Se l'immagine √® tonda */
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    #final-image:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }

    /* Gestione delle sezioni con opacit√† per transizioni fluide */
    .page-section {
        position: absolute; /* Permette transizioni di opacit√† senza influenzare il layout */
        top: 0;
        left: 0;
        width: 100%;
        padding: inherit; /* Mantiene il padding del container */
        box-sizing: border-box;
        opacity: 0;
        pointer-events: none; /* Non intercettare eventi quando √® invisibile */
        transition: opacity var(--transition-speed) ease-in-out, transform var(--transition-speed) ease-in-out;
        transform: translateY(20px); /* Piccola traslazione per l'effetto di ingresso */
    }

    .page-section.active {
        opacity: 1;
        pointer-events: all;
        transform: translateY(0);
        position: static; /* Occupare spazio quando attiva */
    }

    /* Nascondi gli elementi HTML inattivi per non occupare spazio nel DOM */
    .page-section:not(.active) {
        display: none;
    }

    /* Specifiche per il container durante la transizione tra intro e quiz */
    .container.transitioning {
        overflow: hidden; /* Nasconde il contenuto che esce/entra durante la transizione */
    }


    /* Media queries per una migliore responsivit√† */
    @media (max-width: 600px) {
        .container {
            padding: 20px;
            margin: 10px;
        }

        .phase-1 h1 {
            font-size: 2em;
        }

        .phase-2 h1, .phase-2 h2 {
            font-size: 1.6em;
        }

        .question-section p {
            font-size: 1em;
        }

        .options label {
            padding: 12px;
            font-size: 0.95em;
        }

        .phase-2 button {
            padding: 12px 20px;
            font-size: 1em;
        }

        #final-phrase {
            font-size: 1.2em;
        }
    }
  </style>
</head>
<body class="phase-1">
  <div id="container">

    <div id="intro" class="page-section active">
      <h1>Quanto mi ami davvero?</h1>
      <p>Clicca qui e te lo dimostro a modo mio.</p>
      <img src="corvocarino.JPG" alt="Cliccami per scoprire" id="intro-image">
      <div class="clickable" id="intro-clickable-button">üíó CLICCAMI üíó</div>
    </div>

    <div id="pre-quiz-section" class="page-section">
        <h2>Ora che hai cliccato‚Ä¶ vediamo il tuo lato nascosto.</h2>
        <button id="start-quiz-button">Inizia il Quiz</button>
    </div>

    <div id="quiz-section" class="page-section">
        <div id="quizContent">
            <div class="question-section" data-question-id="q1">
                <p>1. Cosa speri che non vedano nei tuoi occhi?</p>
                <div class="options">
                    <input type="radio" id="q1o1" name="q1" value="La stanchezza"><label for="q1o1">La stanchezza</label>
                    <input type="radio" id="q1o2" name="q1" value="La rabbia"><label for="q1o2">La rabbia</label>
                    <input type="radio" id="q1o3" name="q1" value="Il senso di colpa"><label for="q1o3">Il senso di colpa</label>
                    <input type="radio" id="q1o4" name="q1" value="Il vuoto"><label for="q1o4">Il vuoto</label>
                </div>
            </div>

            <div class="question-section" data-question-id="q2">
                <p>2. Cosa dici quando stai male?</p>
                <div class="options">
                    <input type="radio" id="q2o1" name="q2" value="'Sto solo pensando'"><label for="q2o1">'Sto solo pensando'</label>
                    <input type="radio" id="q2o2" name="q2" value="'Sono stanco'"><label for="q2o2">'Sono stanco'</label>
                    <input type="radio" id="q2o3" name="q2" value="'Lasciami un po‚Äô di spazio'"><label for="q2o3">'Lasciami un po‚Äô di spazio'</label>
                    <input type="radio" id="q2o4" name="q2" value="Niente"><label for="q2o4">Niente</label>
                </div>
            </div>

            <div class="question-section" data-question-id="q3">
                <p>3. A chi racconti la tua versione peggiore?</p>
                <div class="options">
                    <input type="radio" id="q3o1" name="q3" value="Nessuno"><label for="q3o1">Nessuno</label>
                    <input type="radio" id="q3o2" name="q3" value="A chi non potr√† ferirmi"><label for="q3o2">A chi non potr√† ferirmi</label>
                    <input type="radio" id="q3o3" name="q3" value="A chi amo"><label for="q3o3">A chi amo</label>
                    <input type="radio" id="q3o4" name="q3" value="A me stesso"><label for="q3o4">A me stesso</label>
                </div>
            </div>

            <div class="question-section" data-question-id="q4">
                <p>4. Cosa ti ferisce di pi√π?</p>
                <div class="options">
                    <input type="radio" id="q4o1" name="q4" value="Essere dimenticato"><label for="q4o1">Essere dimenticato</label>
                    <input type="radio" id="q4o2" name="q4" value="Non essere capito"><label for="q4o2">Non essere capito</label>
                    <input type="radio" id="q4o3" name="q4" value="Sentirmi inadeguato"><label for="q4o3">Sentirmi inadeguato</label>
                    <input type="radio" id="q4o4" name="q4" value="Essere visto, davvero"><label for="q4o4">Essere visto, davvero</label>
                </div>
            </div>
        </div>
        <button id="submit-quiz" disabled>Scopri la tua verit√†</button>
    </div>

    <div id="result-section" class="page-section">
      <h2>La verit√† non consola. Ma almeno ti guarda in faccia.</h2>
      <ul id="summary" style="list-style: none; padding: 0;"></ul>
      <img src="corvo.JPG" alt="Condividi su WhatsApp" id="final-image">
      </div>
  </div>

  <script>
    const introSection = document.getElementById('intro');
    const introImage = document.getElementById('intro-image');
    const introClickableButton = document.getElementById('intro-clickable-button');
    const preQuizSection = document.getElementById('pre-quiz-section');
    const startQuizButton = document.getElementById('start-quiz-button');
    const quizSection = document.getElementById('quiz-section');
    const resultSection = document.getElementById('result-section');
    const mainContainer = document.getElementById('container');
    const body = document.body;
    const submitButton = document.getElementById('submit-quiz');
    const finalPhraseElement = document.getElementById('final-phrase');
    const finalImage = document.getElementById('final-image'); // L'immagine su cui cliccare per condividere

    const allRadios = document.querySelectorAll('#quiz-section input[type="radio"]');
    const questionsDivs = document.querySelectorAll('.question-section');

    let userAnswers = {};

    function changeSection(hideSection, showSection, newBodyClass = null, newContainerClass = null) {
        hideSection.classList.remove('active');
        mainContainer.classList.add('transitioning');

        setTimeout(() => {
            hideSection.style.display = 'none';

            if (newBodyClass) {
                body.className = newBodyClass;
            }
            if (newContainerClass) {
                mainContainer.className = newContainerClass;
            }

            showSection.style.display = 'block';
            showSection.offsetWidth;
            showSection.classList.add('active');
            mainContainer.classList.remove('transitioning');
        }, parseFloat(getComputedStyle(hideSection).transitionDuration) * 1000);
    }

    // Passaggio da intro (corvocarino.JPG) a pre-quiz
    introImage.addEventListener('click', () => {
        changeSection(introSection, preQuizSection, 'phase-2', 'container phase-2');
    });
    introClickableButton.addEventListener('click', () => {
        changeSection(introSection, preQuizSection, 'phase-2', 'container phase-2');
    });

    startQuizButton.addEventListener('click', () => {
        changeSection(preQuizSection, quizSection, 'phase-2', 'container phase-2');
        userAnswers = {};
        allRadios.forEach(radio => radio.checked = false);
        document.querySelectorAll('.options label').forEach(label => {
            label.style.backgroundColor = '';
            label.style.borderColor = '';
            label.style.color = '';
        });
        checkAllAnswered();
    });

    function checkAllAnswered() {
        let allAnswered = true;
        questionsDivs.forEach(qDiv => {
            const questionName = qDiv.querySelector('input[type="radio"]').name;
            const isQuestionAnswered = qDiv.querySelector(`input[name="${questionName}"]:checked`);
            if (!isQuestionAnswered) {
                allAnswered = false;
            }
        });
        submitButton.disabled = !allAnswered;
    }

    allRadios.forEach(radio => {
        radio.addEventListener('change', (event) => {
            const questionName = event.target.name;
            const answerValue = event.target.value;
            userAnswers[questionName] = answerValue;

            const currentLabel = event.target.nextElementSibling;
            const optionsInThisQuestion = event.target.parentElement.querySelectorAll('label');
            optionsInThisQuestion.forEach(label => {
                label.style.backgroundColor = 'var(--quiz-container-bg)';
                label.style.borderColor = 'var(--quiz-border-color)';
                label.style.color = 'var(--quiz-text-color)';
            });
            currentLabel.style.backgroundColor = 'var(--quiz-primary-color)';
            currentLabel.style.borderColor = 'var(--quiz-primary-color)';
            currentLabel.style.color = 'white';

            checkAllAnswered();
        });
    });

    submitButton.addEventListener('click', () => {
        if (Object.keys(userAnswers).length < questionsDivs.length) {
            alert("Rispondi a tutte le domande per scoprire la tua verit√†.");
            return;
        }
        showResult();
    });

    function showResult() {
        const ul = document.getElementById('summary');
        ul.innerHTML = '';
        questionsDivs.forEach(qDiv => {
            const questionText = qDiv.querySelector('p').textContent;
            const questionName = qDiv.querySelector('input[type="radio"]').name;
            const answer = userAnswers[questionName];

            if (answer) {
                const li = document.createElement('li');
                li.innerHTML = `<strong>${questionText}</strong> <br> &rarr; ${answer}`;
                ul.appendChild(li);
            }
        });

        changeSection(quizSection, resultSection, 'phase-2', 'container phase-2');
    }

    // Condivisione WhatsApp al click sull'immagine finale
    finalImage.addEventListener('click', shareWhatsApp);

    function shareWhatsApp() {
        let whatsappMessage = "Ho scoperto il mio lato nascosto:\n\n";

        questionsDivs.forEach(qDiv => {
            const questionText = qDiv.querySelector('p').textContent.replace(/^\d+\.\s/, '');
            const questionName = qDiv.querySelector('input[type="radio"]').name;
            const answer = userAnswers[questionName];
            if (answer) {
                whatsappMessage += `${questionText.trim()} ‚Üí ${answer}\n`;
            }
        });

        whatsappMessage += `\n"${finalPhraseElement.textContent}"`;
        whatsappMessage += `\n\nScoprilo anche tu: ${window.location.href}`;

        // L'URL dell'immagine del corvo per la condivisione (corvo.JPG)
        const imageUrl = window.location.origin + '/corvo.JPG'; // Assicurati che il percorso sia corretto

        // Tenta di includere l'immagine nell'URL di WhatsApp.
        // NOTA: Questa funzionalit√† √® molto limitata e potrebbe non funzionare.
        // WhatsApp solitamente permette di pre-compilare solo il testo.
        const encodedMessage = encodeURIComponent(whatsappMessage);
        // Alcune fonti suggeriscono di aggiungere &attachment=URL_IMMAGINE ma non √® standard.
        // In alternativa, si potrebbe provare a usare l'API Web Share se si condivide un blob/file,
        // ma √® pi√π complesso e richiede il consenso dell'utente.
        const whatsappUrl = `https://wa.me/?text=${encodedMessage}`; // Questo √® l'approccio pi√π affidabile per solo testo

        // Per un tentativo di includere l'immagine (non garantito):
        // const whatsappUrl = `https://wa.me/?text=${encodedMessage}&image=${encodeURIComponent(imageUrl)}`;
        // Oppure, per desktop, si pu√≤ provare con file:// URL (ma ha restrizioni di sicurezza)
        // La soluzione migliore √® che l'utente selezioni l'immagine manualmente.

        window.open(whatsappUrl, '_blank');
    }

    checkAllAnswered();
  </script>
</body>
</html>
